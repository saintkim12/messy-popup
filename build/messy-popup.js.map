{"version":3,"sources":["messy-popup.js"],"names":["vname","aname","dataDraggableHandle","globalWrapperClassName","popupInfo","insertCss","css","sheet","window","document","styleSheets","insertRule","cssRules","length","cssList","forEach","unbindDraggable","elmnt","handleElement","querySelector","onmousedown","undefined","bindDraggable","pos1","pos2","pos3","pos4","dragMouseDown","e","event","preventDefault","clientX","clientY","onmouseup","closeDragElement","onmousemove","elementDrag","style","bottom","top","offsetTop","right","left","offsetLeft","getFunctionedValue","arg","getDefinedOrNot","args","Array","from","arguments","i","convertSelectorToElement","str","convertTextToElement","div","createElement","innerHTML","firstElementChild","addPopupInfo","id","el","removePopupInfo","show","visibility","hide","destroy","parentNode","removeChild","setDraggable","unset","call","MessyPopup","_config","root","wrapper","global","draggable","zIndex","config","o","wrapObj","key","value","_o","Object","keys","reduce","obj","assign","createPopup","isArray","apply","body","filter","item","map","content","globalZIndex","cloneNode","classList","add","contentDiv","dataset","name","position","child","unsetDraggable","arr","popup","appendChild","getPopup","destroyAll","unsetDraggableAll","getPopupCount","module","w","noConflict","exports","default"],"mappings":"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","file":"messy-popup.js","sourceRoot":"..","sourcesContent":["const vname = 'MessyPopup'\nconst aname = 'messyPopup'\nconst dataDraggableHandle = 'data-messy-draggable-handle'\nconst globalWrapperClassName = 'messy-popup'\nlet popupInfo = {}\n\n// CSS 삽입\nconst insertCss = function(css) {\n  const sheet = window.document.styleSheets[0]\n  return sheet ? (sheet.insertRule(css, sheet.cssRules.length) || true) : false\n}\nconst cssList = [\n'.messy-popup { background-color: #fff; }',\n// '.messy-popup [data-messy-content] { height: 100%; }'\n]\ncssList.forEach(insertCss)\n\nconst unbindDraggable = function() {\n  if (!this) return\n  const elmnt = this\n  const handleElement = elmnt.querySelector('[' + dataDraggableHandle + ']')\n  if (handleElement) {\n    // if present, the header is where you move the DIV from:\n    handleElement.onmousedown = undefined;\n  } else {\n    // otherwise, move the DIV from anywhere inside the DIV:\n    elmnt.onmousedown = undefined;\n  }\n}\nconst bindDraggable = function() {\n  if (!this) return\n  const elmnt = this\n\n  // from https://www.w3schools.com/howto/howto_js_draggable.asp\n  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n  const handleElement = elmnt.querySelector('[' + dataDraggableHandle + ']')\n  if (handleElement) {\n    // if present, the header is where you move the DIV from:\n    handleElement.onmousedown = dragMouseDown;\n  } else {\n    // otherwise, move the DIV from anywhere inside the DIV:\n    elmnt.onmousedown = dragMouseDown;\n  }\n\n  function dragMouseDown(e) {\n    e = e || window.event;\n    e.preventDefault();\n    // get the mouse cursor position at startup:\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    document.onmouseup = closeDragElement;\n    // call a function whenever the cursor moves:\n    document.onmousemove = elementDrag;\n  }\n\n  function elementDrag(e) {\n    e = e || window.event;\n    e.preventDefault();\n    // calculate the new cursor position:\n    pos1 = pos3 - e.clientX;\n    pos2 = pos4 - e.clientY;\n    pos3 = e.clientX;\n    pos4 = e.clientY;\n    // set the element's new position:\n    // convert bottom to top\n    if (elmnt.style.bottom) {\n      elmnt.style.top = elmnt.offsetTop + 'px'\n      elmnt.style.bottom = ''\n    }\n    // convert right to left\n    if (elmnt.style.right) {\n      elmnt.style.left = elmnt.offsetLeft + 'px'\n      elmnt.style.right = ''\n    }\n    elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\n    elmnt.style.left = (elmnt.offsetLeft - pos1) + \"px\";\n  }\n\n  function closeDragElement() {\n    // stop moving when mouse button is released:\n    document.onmouseup = null;\n    document.onmousemove = null;\n  }\n}\n// utils\nconst getFunctionedValue = function(arg) {\n  return typeof arg === 'function' ? arg() : arg\n}\nconst getDefinedOrNot = function() {\n  var args = Array.from(arguments)\n  for(let i = 0; i < args.length; i++) {\n    if (typeof args[i] !== 'undefined') return args[i]\n  }\n  return undefined\n  // return typeof v1 === 'undefined' ? v2 : v1\n}\nconst convertSelectorToElement = function(str) {\n  return str && typeof str === 'string' ? document.querySelector(str) : str\n}\nconst convertTextToElement = function(str) {\n  if (str && typeof str === 'string') {\n    const div = document.createElement('div')\n    div.innerHTML = str\n    return div.firstElementChild\n  } else {\n    return str\n  }\n}\nconst addPopupInfo = function(id, el) {\n  popupInfo[id] = el\n}\nconst removePopupInfo = function(id) {\n  delete popupInfo[id]\n}\nconst show = function(el) {\n  el.style.visibility = ''\n  return el\n}\nconst hide = function(el) {\n  el.style.visibility = 'hidden'\n  return el\n}\nconst destroy = function(id) {\n  const el = popupInfo[id]\n  removePopupInfo(id)\n  return el.parentNode.removeChild(el)\n}\nconst setDraggable = function(id, unset) {\n  unset = unset === false\n  const el = popupInfo[id]\n  unset ? unbindDraggable.call(el) : bindDraggable.call(el)\n}\n\nlet MessyPopup = {}\nMessyPopup._config = {\n  root: 'body',\n  wrapper: (function() {\n    const div = document.createElement('div')\n    return div\n  })(),\n  global: {\n    // hide: true,\n    draggable: true,\n    zIndex: 1000\n  }\n}\nMessyPopup.config = function(o) {\n  const wrapObj = function(key, value) {\n    var _o = {}\n    _o[key] = value\n    return _o\n  }\n  o = Object.keys(o).reduce(function(obj, key) {\n    var _o = Object.assign({}, wrapObj(key, MessyPopup._config[key]), wrapObj(key, o[key]))\n    return Object.assign(obj, _o)\n  }, {})\n  MessyPopup._config = Object.assign(MessyPopup._config, o)\n  // console.log('MessyPopup._config', MessyPopup._config)\n}\nMessyPopup.createPopup = function() {\n  if (Array.isArray(arguments[0])) {\n    return MessyPopup.createPopup.apply(MessyPopup, arguments[0])\n  }\n  var arg = Array.from(arguments)\n  const body = document.querySelector(MessyPopup._config.root)\n  arg.filter(function(item) { return item.id }).map(function(item) {\n    const id = item.id\n    const content = item.content\n    const style = item.style || {}\n    const globalZIndex = MessyPopup._config.global.zIndex\n    const div = convertTextToElement(item.wrapper ? item.wrapper : MessyPopup._config.wrapper).cloneNode(true)\n    // const div = document.createElement('div')\n    div.id = id\n    div.classList.add(globalWrapperClassName)\n    const contentDiv = div.querySelector('[data-messy-content]') || div\n    contentDiv.innerHTML = content\n    div.dataset[aname] = ''\n    // div.dataset[aname + 'Id'] = id\n    ;['top', 'left', 'bottom', 'right', 'position', 'z-index'].forEach(function(name) {\n      div.style[name] = style[name] || ''\n    })\n    div.style.position = div.style.position || 'absolute'\n    div.style['z-index'] = div.style['z-index'] || globalZIndex\n    // TEST\n    ;['width', 'height'].forEach(function(name) {\n      const child = div.querySelector('[data-messy-content] > *:first-child')\n      child && (child.style[name] = style[name] || '')\n    })\n    div.style.visibility = 'hidden'\n    div.show = function() { return show(div) }\n    div.hide = function() { return hide(div) }\n    div.destroy = function() { return destroy(id) }\n    div.setDraggable = function() { return setDraggable(id) }\n    div.unsetDraggable = function() { return setDraggable(id, false) }\n    // console.log('div', div)\n\n    addPopupInfo(id, div)\n    return [div, item]\n  }).map((arr) => {\n    const popup = arr[0]\n    const item = arr[1]\n    const draggable = getDefinedOrNot(getFunctionedValue(item.draggable), MessyPopup._config.global.draggable)\n    const show = (function(hide, show) {\n      if (typeof hide === 'undefined') {\n        if (typeof show === 'undefined') {\n          // default value of hide or show\n          return MessyPopup._config.global.hide !== true\n        }\n        return !(show === false)\n      } else {\n        return !hide\n      }\n    })(getFunctionedValue(item.hide), getFunctionedValue(item.show))\n    body.appendChild(popup)\n    if (draggable)\n      popup.setDraggable()\n    if (show) {\n      popup.show()\n    }\n    return popup\n  })\n  return MessyPopup\n}\nMessyPopup.getPopup = function(id) {\n  return popupInfo[id]\n}\nMessyPopup.show = function(id) {\n  popupInfo[id].style.visibility = ''\n  return MessyPopup\n}\nMessyPopup.hide = function(id) {\n  popupInfo[id].style.visibility = 'hidden'\n  return MessyPopup\n}\nMessyPopup.destroy = function(id) {\n  destroy(id)\n  return MessyPopup\n}\nMessyPopup.destroyAll = function() {\n  Object.keys(popupInfo).forEach(this.destroy)\n}\nMessyPopup.setDraggable = function(id) {\n  popupInfo[id].setDraggable()\n  return MessyPopup\n}\nMessyPopup.unsetDraggable = function(id) {\n  popupInfo[id].unsetDraggable()\n  return MessyPopup\n}\nMessyPopup.unsetDraggableAll = function() {\n  Object.keys(popupInfo).forEach(this.unsetDraggable)\n  return MessyPopup\n}\nMessyPopup.getPopupCount = function() {\n  return Object.keys(popupInfo).length\n}\nMessyPopup.forEach = function() {\n  var arg = arguments\n  ;Object.keys(popupInfo).forEach(function(id, i) {\n    arg[0].apply(MessyPopup, [popupInfo[id], id, i])\n  })\n}\n// w && (w[vname] = MessyPopup)\nif (typeof module === 'undefined') {\n  // global bind\n  var w = typeof global !== 'undefined' ? global : window\n  w && (w[vname] = MessyPopup)\n  MessyPopup.noConflict = function() {\n    // w && (w[vname] = undefined)\n    w && (delete w[vname])\n    return MessyPopup\n  }\n} else {\n  // module.exports bind\n  module.exports = MessyPopup\n  module.exports.default = MessyPopup\n}\n"]}